
<!DOCTYPE html>
<html class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="shortcut icon" href="../../assets/images/favicon.ico">
      
      <meta name="generator" content="mkdocs-0.16.1, mkdocs-material-1.0.5">
    
    
      
        <title>defaults - Craftr v2.0.0.dev7 Documentation</title>
      
    
    
      <script src="../../assets/javascripts/modernizr-56ade86843.js"></script>
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application-9c62e3c932.css">
      
    
    
      
        
        
        
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
      <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    
    
    
  </head>
  
  
  
  
    <body>
  
    <svg class="md-svg">
      <defs>
        
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="drawer">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="search">
    <label class="md-overlay" data-md-component="overlay" for="drawer"></label>
    
      <header class="md-header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../.." title="Craftr v2.0.0.dev7 Documentation" class=" md-icon md-icon--home  md-header-nav__button">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <span class="md-flex__ellipsis md-header-nav__title">
          
            
              
                <span class="md-header-nav__parent">
                  Developer Reference
                </span>
              
            
            defaults
          
        </span>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="search"></label>
          
<div class="md-search" data-md-component="search">
  <div class="md-search__overlay"></div>
  <div class="md-search__inner">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" accesskey="s" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false">
      <label class="md-icon md-search__icon" for="search"></label>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result"></div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            
          </div>
      </div>
    </div>
  </nav>
</header>
    
    <div class="md-container">
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary">
  <label class="md-nav__title md-nav__title--site" for="drawer">
    <i class=" md-icon md-icon--home  md-nav__button">
      
    </i>
    Craftr v2.0.0.dev7 Documentation
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  <li class="md-nav__item">
    
      <a href="../.." title="Home" class="md-nav__link">
        Home
      </a>
    
  </li>

    
      
      
  <li class="md-nav__item">
    
      <a href="../../getting-started/" title="Getting Started" class="md-nav__link">
        Getting Started
      </a>
    
  </li>

    
      
      
  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      Reference
    </label>
    <nav class="md-nav" data-md-component="collapsible">
      <label class="md-nav__title" for="nav-3">
        Reference
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
  <li class="md-nav__item">
    
      <a href="../../ref/package/" title="Package Description" class="md-nav__link">
        Package Description
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../ref/targets/" title="Targets" class="md-nav__link">
        Targets
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../ref/tasks/" title="Tasks" class="md-nav__link">
        Tasks
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../ref/loaders/" title="Loaders" class="md-nav__link">
        Loaders
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../ref/builtins/" title="Built-ins" class="md-nav__link">
        Built-ins
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../ref/config/" title="Build Configuration" class="md-nav__link">
        Build Configuration
      </a>
    
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4" checked>
    
    <label class="md-nav__link" for="nav-4">
      Developer Reference
    </label>
    <nav class="md-nav" data-md-component="collapsible">
      <label class="md-nav__title" for="nav-4">
        Developer Reference
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-1" type="checkbox" id="nav-4-1">
    
    <label class="md-nav__link" for="nav-4-1">
      core
    </label>
    <nav class="md-nav" data-md-component="collapsible">
      <label class="md-nav__title" for="nav-4-1">
        core
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
  <li class="md-nav__item">
    
      <a href="../core/build/" title="build" class="md-nav__link">
        build
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../core/config/" title="config" class="md-nav__link">
        config
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../core/logging/" title="logging" class="md-nav__link">
        logging
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../core/manifest/" title="manifest" class="md-nav__link">
        manifest
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../core/renames/" title="renames" class="md-nav__link">
        renames
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../core/session/" title="session" class="md-nav__link">
        session
      </a>
    
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../platform/" title="platform" class="md-nav__link">
        platform
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-3" type="checkbox" id="nav-4-3">
    
    <label class="md-nav__link" for="nav-4-3">
      utils
    </label>
    <nav class="md-nav" data-md-component="collapsible">
      <label class="md-nav__title" for="nav-4-3">
        utils
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
  <li class="md-nav__item">
    
      <a href="../utils/argspec/" title="argspec" class="md-nav__link">
        argspec
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../utils/cson/" title="cson" class="md-nav__link">
        cson
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../utils/httputils/" title="httputils" class="md-nav__link">
        httputils
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../utils/path/" title="path" class="md-nav__link">
        path
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../utils/pyutils/" title="pyutils" class="md-nav__link">
        pyutils
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../utils/shell/" title="shell" class="md-nav__link">
        shell
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../utils/singleton/" title="singleton" class="md-nav__link">
        singleton
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../utils/tty/" title="tty" class="md-nav__link">
        tty
      </a>
    
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
  <li class="md-nav__item">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="toc">
    
      
    
    
    <a href="./" title="defaults" class="md-nav__link md-nav__link--active">
      defaults
    </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../foreignbuild/" title="foreignbuild" class="md-nav__link">
        foreignbuild
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../loaders/" title="loaders" class="md-nav__link">
        loaders
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../targetbuilder/" title="targetbuilder" class="md-nav__link">
        targetbuilder
      </a>
    
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
  <li class="md-nav__item">
    
      <a href="../../changes/" title="Changelog" class="md-nav__link">
        Changelog
      </a>
    
  </li>

    
      
      
  <li class="md-nav__item">
    
      <a href="../../faq/" title="FAQ" class="md-nav__link">
        FAQ
      </a>
    
  </li>

    
      
      
  <li class="md-nav__item">
    
      <a href="../../projects/" title="Projects using Craftr" class="md-nav__link">
        Projects using Craftr
      </a>
    
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
               
              
                
                <h1 id="craftr.defaults">craftr.defaults</h1>

<h1 id="modcraftrdefaults">:mod:<code>craftr.defaults</code></h1>
<p>This module provides the default global namespace for Craftr modules. Names
starting with an underscore will be ignored.</p>
<h2 id="craftr.defaults.write_response_file">write_response_file</h2>

<pre class="codehilite"><code class="language-python">write_response_file(arguments, builder=None, name=None, force_file=False, suffix='')</code></pre>


<p>Creates a response-file with the specified <em>name</em> in the in the
<code>buildfiles/</code> directory and writes the <em>arguments</em> list quoted into
the file. If <em>builder</em> is specified, it must be a :class:<code>TargetBuilder</code>
and the response file will be added to the implicit dependencies.</p>
<p>If <em>force_file</em> is set to True, a file will always be written. Otherwise,
the function will into possible limitations of the platform and decide
whether to write a response file or to return the <em>arguments</em> as is.</p>
<p>Returns a tuple of <code>(filename, arguments)</code>. If a response file is written,
the returned <em>arguments</em> will be a list with a single string that is the
filename prepended with <code>@</code>. The <em>filename</em> part can be None if no
response file needed to be exported.</p>
<h2 id="craftr.defaults.gentool">gentool</h2>

<pre class="codehilite"><code class="language-python">gentool(commands, preamble=None, environ=None, name=None)</code></pre>


<p>Create a :class:<code>~_build.Tool</code> object. The name of the tool will be derived
from the variable name it is assigned to unless <em>name</em> is specified.</p>
<h2 id="craftr.defaults.append_PATH">append_PATH</h2>

<pre class="codehilite"><code class="language-python">append_PATH(*paths)</code></pre>


<p>This is a helper function that is used to generate a <code>PATH</code> environment
variable from the value that already exists and add the specified <em>paths</em>
to it. It is typically used for example like this:</p>
<p>.. code:: python</p>
<p>run = gentarget(
    commands = [[main, local('example.ini')]],
    explicit=True,
    environ = {'PATH': append_PATH(qt5.bin_dir if qt5 else None)}
  )</p>
<h2 id="craftr.defaults.load_file">load_file</h2>

<pre class="codehilite"><code class="language-python">load_file(filename, export_default_namespace=True)</code></pre>


<p>Loads a Python file into a new module-like object and returns it. The
<em>filename</em> is assumed relative to the currently executed module's
directory (NOT the project directory which can be different).</p>
<h2 id="craftr.defaults.include_defs">include_defs</h2>

<pre class="codehilite"><code class="language-python">include_defs(filename, globals=None)</code></pre>


<p>Uses :mod:<code>load_file</code> to load a Python file and then copies all symbols
that do not start with an underscore into the <em>globals</em> dictionary. If
<em>globals</em> is not specified, it will fall back to the globals of the frame
that calls the function.</p>
<h2 id="craftr.defaults.buildlocal">buildlocal</h2>

<pre class="codehilite"><code class="language-python">buildlocal(rel_path)</code></pre>


<p>Given a relative path, returns the path (still relative) to the build
directory for the current module. This is basically a shorthand for
prepending the module name and version to <em>path</em>.</p>
<h2 id="craftr.defaults.gentask">gentask</h2>

<pre class="codehilite"><code class="language-python">gentask(func, args=None, inputs=(), outputs=(), name=None, explicit=True, **kwargs)</code></pre>


<p>Create a Task that can be embedded into the build chain. Tasks can have input
and output files that cause the task to be embedded into the build chain. By
default, tasks need to be explicitly built or required by other targets.</p>
<p>If <em>args</em> is not specified, it will be replaced by <code>[inputs, outputs]</code>.</p>
<p>:param func: A function to call to execute the task. It must accept a
  variable number of arguments, which are the arguments passed via the <em>args</em>
  parameter. This function will be called from Ninja using the <code>craftr run</code>
  command.
:param args: A list of arguments to pass to <em>func</em>. Note that non-string
  arguments will be pickled, compressed and and encoded in base64, prefixed
  with the string <code>pickle://</code>. These will be unpickled when the task is run.
  Note that <code>$in</code> and <code>$out</code> will be expanded in this argument list.
:param inputs: A list of input files.
:param inputs: A list of output files.
:param name: Alternative target name.
:param kwargs: Additional parameters for the :class:<code>Task</code> constructor.
:return: A :class:<code>Target</code> object.</p>
<h2 id="craftr.defaults.gentarget">gentarget</h2>

<pre class="codehilite"><code class="language-python">gentarget(commands, inputs=(), outputs=(), *args, **kwargs)</code></pre>


<p>Create a :class:<code>~_build.Target</code> object. The name of the target will be
derived from the variable name it is assigned to unless <em>name</em> is specified.</p>
<h2 id="craftr.defaults.local">local</h2>

<pre class="codehilite"><code class="language-python">local(rel_path)</code></pre>


<p>Given a relative path, returns the absolute path relative to the current
module's project directory.</p>
<h2 id="craftr.defaults.glob">glob</h2>

<pre class="codehilite"><code class="language-python">glob(patterns, parent=None, exclude=(), include_dotfiles=False, ignore_false_excludes=False)</code></pre>


<p>Wrapper for :func:<code>path.glob</code> that automatically uses the current modules
project directory for the <em>parent</em> argument if it has not been specifically
set.</p>
<h2 id="craftr.defaults.error">error</h2>

<pre class="codehilite"><code class="language-python">error(*message)</code></pre>


<p>Raises a :class:<code>ModuleError</code> exception.</p>
<h2 id="craftr.defaults.runtarget">runtarget</h2>

<pre class="codehilite"><code class="language-python">runtarget(target, *args, inputs=(), outputs=(), **kwargs)</code></pre>


<p>Simplification of :func:<code>gentarget</code> to make it more obvious that a
generate target is actually executed.</p>
<h2 id="craftr.defaults.genalias">genalias</h2>

<pre class="codehilite"><code class="language-python">genalias(*targets, name=None, **kwargs)</code></pre>


<p>Create a target that serves as an alias for all targets list in <em>targets</em>.</p>
<h2 id="craftr.defaults.map">map</h2>

<pre class="codehilite"><code class="language-python">map(procedure, iterable)</code></pre>


<p>Alternative for the built-in <code>map()</code> function that returns a list instead
of an iterable (which is the behaviour since Python 3).</p>
<h2 id="craftr.defaults.task">task</h2>

<pre class="codehilite"><code class="language-python">task(inputs=(), outputs=(), args=None, **kwargs)</code></pre>


<p>Generate a one-off task. Optionally you can specified a list of <em>inputs</em>
and <em>outputs</em>. If <em>args</em> is not specified, the <em>inputs</em> and <em>outputs</em> will
be passed as arguments to the task function. Otherwise, <em>args</em> will be
passed.</p>
<h2 id="craftr.defaults.return_">return_</h2>

<pre class="codehilite"><code class="language-python">return_()</code></pre>


<p>Raises a :class:<code>ModuleReturn</code> exception.</p>
<h2 id="craftr.defaults.filter">filter</h2>

<pre class="codehilite"><code class="language-python">filter(predicate, iterable)</code></pre>


<p>Alternative for the built-in <code>filter()</code> function that returns a list
instead of an iterable (which is the behaviour since Python 3).</p>
<h2 id="craftr.defaults.load">load</h2>

<pre class="codehilite"><code class="language-python">load(name, into=None, mode='exports', _stackframe=1)</code></pre>


<p>Load a Craftr module by name and return it. If <em>into</em> is specified, it must
be a dictionary that will be filled with all the members of the module. Note
that this function returns the namespace object of the module rather than
the actual :class:<code>craftr.core.session.Module</code> object that wraps the module
information unless <em>get_namespace</em> is False.</p>
<p>The version criteria is read from the current module's manifest.</p>
<p>:param name: The name of the module to load. If this name is suffixed
  with the two characters <code>.*</code> and the <em>into</em> parameter is :const:<code>None</code>,
  the contents of the module will be exported into the globals of the
  calling frame.
:param into: If specified, must be a dictionary.
:param mode: One of <code>'module'</code>, <code>'namespace'</code> and <code>'exports'</code>. In module
  mode, the :class:<code>craftr.core.session.Module</code> will be returned. In namespace
  mode, the namespace of that module will be returned. In exports mode, if
  the namespace has a member named <code>'exports'</code>, that member will be returned,
  otherwise it behaves the same as namespace mode. Defaults to <code>'exports'</code>.
:return: The module namespace object (of type :class:<code>types.ModuleType</code>)
  or the actual :class:<code>craftr.core.session.Module</code> if <em>get_namespace</em>
  is False.
:raise ModuleNotFound: If the module could not be found.
:raise RuntimeError: If the module that is attempted to be loaded is not
  declared in the current module's manifest.</p>
<h2 id="craftr.defaults.ModuleReturn">ModuleReturn</h2>

<pre class="codehilite"><code class="language-python">ModuleReturn(*args, **kwargs)</code></pre>


<p>This exception is raised to "return" form a module execution pre-emptively
without causing an error. See :func:<code>return_()</code></p>
<h2 id="craftr.defaults.relocate_files">relocate_files</h2>

<pre class="codehilite"><code class="language-python">relocate_files(files, outdir, suffix, replace_suffix=True, parent=None)</code></pre>


<p>Converts a list of filenames, relocating them to <em>outdir</em> and replacing
their existing suffix. If <em>suffix</em> is a callable, it will be passed the
new filename and expected to return the same filename, eventually with
a different suffix.</p>
<h2 id="craftr.defaults.zip">zip</h2>

<pre class="codehilite"><code class="language-python">zip(*iterables, fill=NotImplemented)</code></pre>


<p>Alternative to the Python built-in <code>zip()</code> function. This function returns
a list rather than an iterable and also supports swapping to the
:func:<code>itertools.izip_longest</code> version if the <em>fill</em> parameter is specified.</p>
              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../utils/tty/" title="tty" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                tty
              </span>
            </div>
          </a>
        
        
          <a href="../foreignbuild/" title="foreignbuild" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                foreignbuild
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="http://www.mkdocs.org" title="MkDocs">MkDocs</a>
        and
        <a href="http://squidfunk.github.io/mkdocs-material/" title="Material for MkDocs">
          Material for MkDocs</a>
      </div>
      
        
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application-f7ac33b6fb.js"></script>
      <script>app.initialize({url:{base:"../.."}})</script>
      
    
    
      
    
  </body>
</html>